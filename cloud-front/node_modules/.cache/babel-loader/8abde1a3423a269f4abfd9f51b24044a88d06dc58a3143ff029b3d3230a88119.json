{"ast":null,"code":"/**\n * @fileoverview Rule to check for \"block scoped\" variables by binding context\n * @author Matt DuVall <http://www.mattduvall.com>\n */\n\"use strict\";\n\n//------------------------------------------------------------------------------\n// Rule Definition\n//------------------------------------------------------------------------------\nrequire(\"core-js/modules/es.array.push.js\");\nmodule.exports = {\n  meta: {\n    type: \"suggestion\",\n    docs: {\n      description: \"enforce the use of variables within the scope they are defined\",\n      category: \"Best Practices\",\n      recommended: false,\n      url: \"https://eslint.org/docs/rules/block-scoped-var\"\n    },\n    schema: [],\n    messages: {\n      outOfScope: \"'{{name}}' used outside of binding context.\"\n    }\n  },\n  create(context) {\n    let stack = [];\n\n    /**\n     * Makes a block scope.\n     * @param {ASTNode} node A node of a scope.\n     * @returns {void}\n     */\n    function enterScope(node) {\n      stack.push(node.range);\n    }\n\n    /**\n     * Pops the last block scope.\n     * @returns {void}\n     */\n    function exitScope() {\n      stack.pop();\n    }\n\n    /**\n     * Reports a given reference.\n     * @param {eslint-scope.Reference} reference A reference to report.\n     * @returns {void}\n     */\n    function report(reference) {\n      const identifier = reference.identifier;\n      context.report({\n        node: identifier,\n        messageId: \"outOfScope\",\n        data: {\n          name: identifier.name\n        }\n      });\n    }\n\n    /**\n     * Finds and reports references which are outside of valid scopes.\n     * @param {ASTNode} node A node to get variables.\n     * @returns {void}\n     */\n    function checkForVariables(node) {\n      if (node.kind !== \"var\") {\n        return;\n      }\n\n      // Defines a predicate to check whether or not a given reference is outside of valid scope.\n      const scopeRange = stack[stack.length - 1];\n\n      /**\n       * Check if a reference is out of scope\n       * @param {ASTNode} reference node to examine\n       * @returns {boolean} True is its outside the scope\n       * @private\n       */\n      function isOutsideOfScope(reference) {\n        const idRange = reference.identifier.range;\n        return idRange[0] < scopeRange[0] || idRange[1] > scopeRange[1];\n      }\n\n      // Gets declared variables, and checks its references.\n      const variables = context.getDeclaredVariables(node);\n      for (let i = 0; i < variables.length; ++i) {\n        // Reports.\n        variables[i].references.filter(isOutsideOfScope).forEach(report);\n      }\n    }\n    return {\n      Program(node) {\n        stack = [node.range];\n      },\n      // Manages scopes.\n      BlockStatement: enterScope,\n      \"BlockStatement:exit\": exitScope,\n      ForStatement: enterScope,\n      \"ForStatement:exit\": exitScope,\n      ForInStatement: enterScope,\n      \"ForInStatement:exit\": exitScope,\n      ForOfStatement: enterScope,\n      \"ForOfStatement:exit\": exitScope,\n      SwitchStatement: enterScope,\n      \"SwitchStatement:exit\": exitScope,\n      CatchClause: enterScope,\n      \"CatchClause:exit\": exitScope,\n      // Finds and reports references which are outside of valid scope.\n      VariableDeclaration: checkForVariables\n    };\n  }\n};","map":{"version":3,"names":["require","module","exports","meta","type","docs","description","category","recommended","url","schema","messages","outOfScope","create","context","stack","enterScope","node","push","range","exitScope","pop","report","reference","identifier","messageId","data","name","checkForVariables","kind","scopeRange","length","isOutsideOfScope","idRange","variables","getDeclaredVariables","i","references","filter","forEach","Program","BlockStatement","ForStatement","ForInStatement","ForOfStatement","SwitchStatement","CatchClause","VariableDeclaration"],"sources":["D:/Project/YM~Cloud/cloud-front/node_modules/eslint/lib/rules/block-scoped-var.js"],"sourcesContent":["/**\n * @fileoverview Rule to check for \"block scoped\" variables by binding context\n * @author Matt DuVall <http://www.mattduvall.com>\n */\n\"use strict\";\n\n//------------------------------------------------------------------------------\n// Rule Definition\n//------------------------------------------------------------------------------\n\nmodule.exports = {\n    meta: {\n        type: \"suggestion\",\n\n        docs: {\n            description: \"enforce the use of variables within the scope they are defined\",\n            category: \"Best Practices\",\n            recommended: false,\n            url: \"https://eslint.org/docs/rules/block-scoped-var\"\n        },\n\n        schema: [],\n\n        messages: {\n            outOfScope: \"'{{name}}' used outside of binding context.\"\n        }\n    },\n\n    create(context) {\n        let stack = [];\n\n        /**\n         * Makes a block scope.\n         * @param {ASTNode} node A node of a scope.\n         * @returns {void}\n         */\n        function enterScope(node) {\n            stack.push(node.range);\n        }\n\n        /**\n         * Pops the last block scope.\n         * @returns {void}\n         */\n        function exitScope() {\n            stack.pop();\n        }\n\n        /**\n         * Reports a given reference.\n         * @param {eslint-scope.Reference} reference A reference to report.\n         * @returns {void}\n         */\n        function report(reference) {\n            const identifier = reference.identifier;\n\n            context.report({ node: identifier, messageId: \"outOfScope\", data: { name: identifier.name } });\n        }\n\n        /**\n         * Finds and reports references which are outside of valid scopes.\n         * @param {ASTNode} node A node to get variables.\n         * @returns {void}\n         */\n        function checkForVariables(node) {\n            if (node.kind !== \"var\") {\n                return;\n            }\n\n            // Defines a predicate to check whether or not a given reference is outside of valid scope.\n            const scopeRange = stack[stack.length - 1];\n\n            /**\n             * Check if a reference is out of scope\n             * @param {ASTNode} reference node to examine\n             * @returns {boolean} True is its outside the scope\n             * @private\n             */\n            function isOutsideOfScope(reference) {\n                const idRange = reference.identifier.range;\n\n                return idRange[0] < scopeRange[0] || idRange[1] > scopeRange[1];\n            }\n\n            // Gets declared variables, and checks its references.\n            const variables = context.getDeclaredVariables(node);\n\n            for (let i = 0; i < variables.length; ++i) {\n\n                // Reports.\n                variables[i]\n                    .references\n                    .filter(isOutsideOfScope)\n                    .forEach(report);\n            }\n        }\n\n        return {\n            Program(node) {\n                stack = [node.range];\n            },\n\n            // Manages scopes.\n            BlockStatement: enterScope,\n            \"BlockStatement:exit\": exitScope,\n            ForStatement: enterScope,\n            \"ForStatement:exit\": exitScope,\n            ForInStatement: enterScope,\n            \"ForInStatement:exit\": exitScope,\n            ForOfStatement: enterScope,\n            \"ForOfStatement:exit\": exitScope,\n            SwitchStatement: enterScope,\n            \"SwitchStatement:exit\": exitScope,\n            CatchClause: enterScope,\n            \"CatchClause:exit\": exitScope,\n\n            // Finds and reports references which are outside of valid scope.\n            VariableDeclaration: checkForVariables\n        };\n\n    }\n};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,YAAY;;AAEZ;AACA;AACA;AAAAA,OAAA;AAEAC,MAAM,CAACC,OAAO,GAAG;EACbC,IAAI,EAAE;IACFC,IAAI,EAAE,YAAY;IAElBC,IAAI,EAAE;MACFC,WAAW,EAAE,gEAAgE;MAC7EC,QAAQ,EAAE,gBAAgB;MAC1BC,WAAW,EAAE,KAAK;MAClBC,GAAG,EAAE;IACT,CAAC;IAEDC,MAAM,EAAE,EAAE;IAEVC,QAAQ,EAAE;MACNC,UAAU,EAAE;IAChB;EACJ,CAAC;EAEDC,MAAMA,CAACC,OAAO,EAAE;IACZ,IAAIC,KAAK,GAAG,EAAE;;IAEd;AACR;AACA;AACA;AACA;IACQ,SAASC,UAAUA,CAACC,IAAI,EAAE;MACtBF,KAAK,CAACG,IAAI,CAACD,IAAI,CAACE,KAAK,CAAC;IAC1B;;IAEA;AACR;AACA;AACA;IACQ,SAASC,SAASA,CAAA,EAAG;MACjBL,KAAK,CAACM,GAAG,CAAC,CAAC;IACf;;IAEA;AACR;AACA;AACA;AACA;IACQ,SAASC,MAAMA,CAACC,SAAS,EAAE;MACvB,MAAMC,UAAU,GAAGD,SAAS,CAACC,UAAU;MAEvCV,OAAO,CAACQ,MAAM,CAAC;QAAEL,IAAI,EAAEO,UAAU;QAAEC,SAAS,EAAE,YAAY;QAAEC,IAAI,EAAE;UAAEC,IAAI,EAAEH,UAAU,CAACG;QAAK;MAAE,CAAC,CAAC;IAClG;;IAEA;AACR;AACA;AACA;AACA;IACQ,SAASC,iBAAiBA,CAACX,IAAI,EAAE;MAC7B,IAAIA,IAAI,CAACY,IAAI,KAAK,KAAK,EAAE;QACrB;MACJ;;MAEA;MACA,MAAMC,UAAU,GAAGf,KAAK,CAACA,KAAK,CAACgB,MAAM,GAAG,CAAC,CAAC;;MAE1C;AACZ;AACA;AACA;AACA;AACA;MACY,SAASC,gBAAgBA,CAACT,SAAS,EAAE;QACjC,MAAMU,OAAO,GAAGV,SAAS,CAACC,UAAU,CAACL,KAAK;QAE1C,OAAOc,OAAO,CAAC,CAAC,CAAC,GAAGH,UAAU,CAAC,CAAC,CAAC,IAAIG,OAAO,CAAC,CAAC,CAAC,GAAGH,UAAU,CAAC,CAAC,CAAC;MACnE;;MAEA;MACA,MAAMI,SAAS,GAAGpB,OAAO,CAACqB,oBAAoB,CAAClB,IAAI,CAAC;MAEpD,KAAK,IAAImB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,SAAS,CAACH,MAAM,EAAE,EAAEK,CAAC,EAAE;QAEvC;QACAF,SAAS,CAACE,CAAC,CAAC,CACPC,UAAU,CACVC,MAAM,CAACN,gBAAgB,CAAC,CACxBO,OAAO,CAACjB,MAAM,CAAC;MACxB;IACJ;IAEA,OAAO;MACHkB,OAAOA,CAACvB,IAAI,EAAE;QACVF,KAAK,GAAG,CAACE,IAAI,CAACE,KAAK,CAAC;MACxB,CAAC;MAED;MACAsB,cAAc,EAAEzB,UAAU;MAC1B,qBAAqB,EAAEI,SAAS;MAChCsB,YAAY,EAAE1B,UAAU;MACxB,mBAAmB,EAAEI,SAAS;MAC9BuB,cAAc,EAAE3B,UAAU;MAC1B,qBAAqB,EAAEI,SAAS;MAChCwB,cAAc,EAAE5B,UAAU;MAC1B,qBAAqB,EAAEI,SAAS;MAChCyB,eAAe,EAAE7B,UAAU;MAC3B,sBAAsB,EAAEI,SAAS;MACjC0B,WAAW,EAAE9B,UAAU;MACvB,kBAAkB,EAAEI,SAAS;MAE7B;MACA2B,mBAAmB,EAAEnB;IACzB,CAAC;EAEL;AACJ,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}