{"ast":null,"code":"/**\n * @fileoverview Rule to flag blocks with no reason to exist\n * @author Brandon Mills\n */\n\n\"use strict\";\n\n//------------------------------------------------------------------------------\n// Rule Definition\n//------------------------------------------------------------------------------\nrequire(\"core-js/modules/es.array.push.js\");\nmodule.exports = {\n  meta: {\n    type: \"suggestion\",\n    docs: {\n      description: \"disallow unnecessary nested blocks\",\n      category: \"Best Practices\",\n      recommended: false,\n      url: \"https://eslint.org/docs/rules/no-lone-blocks\"\n    },\n    schema: [],\n    messages: {\n      redundantBlock: \"Block is redundant.\",\n      redundantNestedBlock: \"Nested block is redundant.\"\n    }\n  },\n  create(context) {\n    // A stack of lone blocks to be checked for block-level bindings\n    const loneBlocks = [];\n    let ruleDef;\n\n    /**\n     * Reports a node as invalid.\n     * @param {ASTNode} node The node to be reported.\n     * @returns {void}\n     */\n    function report(node) {\n      const messageId = node.parent.type === \"BlockStatement\" ? \"redundantNestedBlock\" : \"redundantBlock\";\n      context.report({\n        node,\n        messageId\n      });\n    }\n\n    /**\n     * Checks for any occurrence of a BlockStatement in a place where lists of statements can appear\n     * @param {ASTNode} node The node to check\n     * @returns {boolean} True if the node is a lone block.\n     */\n    function isLoneBlock(node) {\n      return node.parent.type === \"BlockStatement\" || node.parent.type === \"Program\" ||\n      // Don't report blocks in switch cases if the block is the only statement of the case.\n      node.parent.type === \"SwitchCase\" && !(node.parent.consequent[0] === node && node.parent.consequent.length === 1);\n    }\n\n    /**\n     * Checks the enclosing block of the current node for block-level bindings,\n     * and \"marks it\" as valid if any.\n     * @returns {void}\n     */\n    function markLoneBlock() {\n      if (loneBlocks.length === 0) {\n        return;\n      }\n      const block = context.getAncestors().pop();\n      if (loneBlocks[loneBlocks.length - 1] === block) {\n        loneBlocks.pop();\n      }\n    }\n\n    // Default rule definition: report all lone blocks\n    ruleDef = {\n      BlockStatement(node) {\n        if (isLoneBlock(node)) {\n          report(node);\n        }\n      }\n    };\n\n    // ES6: report blocks without block-level bindings, or that's only child of another block\n    if (context.parserOptions.ecmaVersion >= 6) {\n      ruleDef = {\n        BlockStatement(node) {\n          if (isLoneBlock(node)) {\n            loneBlocks.push(node);\n          }\n        },\n        \"BlockStatement:exit\"(node) {\n          if (loneBlocks.length > 0 && loneBlocks[loneBlocks.length - 1] === node) {\n            loneBlocks.pop();\n            report(node);\n          } else if (node.parent.type === \"BlockStatement\" && node.parent.body.length === 1) {\n            report(node);\n          }\n        }\n      };\n      ruleDef.VariableDeclaration = function (node) {\n        if (node.kind === \"let\" || node.kind === \"const\") {\n          markLoneBlock();\n        }\n      };\n      ruleDef.FunctionDeclaration = function () {\n        if (context.getScope().isStrict) {\n          markLoneBlock();\n        }\n      };\n      ruleDef.ClassDeclaration = markLoneBlock;\n    }\n    return ruleDef;\n  }\n};","map":{"version":3,"names":["require","module","exports","meta","type","docs","description","category","recommended","url","schema","messages","redundantBlock","redundantNestedBlock","create","context","loneBlocks","ruleDef","report","node","messageId","parent","isLoneBlock","consequent","length","markLoneBlock","block","getAncestors","pop","BlockStatement","parserOptions","ecmaVersion","push","BlockStatement:exit","body","VariableDeclaration","kind","FunctionDeclaration","getScope","isStrict","ClassDeclaration"],"sources":["D:/Project/YM~Cloud/cloud-front/node_modules/eslint/lib/rules/no-lone-blocks.js"],"sourcesContent":["/**\n * @fileoverview Rule to flag blocks with no reason to exist\n * @author Brandon Mills\n */\n\n\"use strict\";\n\n//------------------------------------------------------------------------------\n// Rule Definition\n//------------------------------------------------------------------------------\n\nmodule.exports = {\n    meta: {\n        type: \"suggestion\",\n\n        docs: {\n            description: \"disallow unnecessary nested blocks\",\n            category: \"Best Practices\",\n            recommended: false,\n            url: \"https://eslint.org/docs/rules/no-lone-blocks\"\n        },\n\n        schema: [],\n\n        messages: {\n            redundantBlock: \"Block is redundant.\",\n            redundantNestedBlock: \"Nested block is redundant.\"\n        }\n    },\n\n    create(context) {\n\n        // A stack of lone blocks to be checked for block-level bindings\n        const loneBlocks = [];\n        let ruleDef;\n\n        /**\n         * Reports a node as invalid.\n         * @param {ASTNode} node The node to be reported.\n         * @returns {void}\n         */\n        function report(node) {\n            const messageId = node.parent.type === \"BlockStatement\" ? \"redundantNestedBlock\" : \"redundantBlock\";\n\n            context.report({\n                node,\n                messageId\n            });\n        }\n\n        /**\n         * Checks for any occurrence of a BlockStatement in a place where lists of statements can appear\n         * @param {ASTNode} node The node to check\n         * @returns {boolean} True if the node is a lone block.\n         */\n        function isLoneBlock(node) {\n            return node.parent.type === \"BlockStatement\" ||\n                node.parent.type === \"Program\" ||\n\n                // Don't report blocks in switch cases if the block is the only statement of the case.\n                node.parent.type === \"SwitchCase\" && !(node.parent.consequent[0] === node && node.parent.consequent.length === 1);\n        }\n\n        /**\n         * Checks the enclosing block of the current node for block-level bindings,\n         * and \"marks it\" as valid if any.\n         * @returns {void}\n         */\n        function markLoneBlock() {\n            if (loneBlocks.length === 0) {\n                return;\n            }\n\n            const block = context.getAncestors().pop();\n\n            if (loneBlocks[loneBlocks.length - 1] === block) {\n                loneBlocks.pop();\n            }\n        }\n\n        // Default rule definition: report all lone blocks\n        ruleDef = {\n            BlockStatement(node) {\n                if (isLoneBlock(node)) {\n                    report(node);\n                }\n            }\n        };\n\n        // ES6: report blocks without block-level bindings, or that's only child of another block\n        if (context.parserOptions.ecmaVersion >= 6) {\n            ruleDef = {\n                BlockStatement(node) {\n                    if (isLoneBlock(node)) {\n                        loneBlocks.push(node);\n                    }\n                },\n                \"BlockStatement:exit\"(node) {\n                    if (loneBlocks.length > 0 && loneBlocks[loneBlocks.length - 1] === node) {\n                        loneBlocks.pop();\n                        report(node);\n                    } else if (\n                        node.parent.type === \"BlockStatement\" &&\n                        node.parent.body.length === 1\n                    ) {\n                        report(node);\n                    }\n                }\n            };\n\n            ruleDef.VariableDeclaration = function(node) {\n                if (node.kind === \"let\" || node.kind === \"const\") {\n                    markLoneBlock();\n                }\n            };\n\n            ruleDef.FunctionDeclaration = function() {\n                if (context.getScope().isStrict) {\n                    markLoneBlock();\n                }\n            };\n\n            ruleDef.ClassDeclaration = markLoneBlock;\n        }\n\n        return ruleDef;\n    }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}